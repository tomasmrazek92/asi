"use strict";(()=>{gsap.registerPlugin(ScrollTrigger,Flip);$(document).ready(()=>{for(var t=document.getElementsByTagName("a"),n=window.location.hostname,i=0;i<t.length;i++){var a=t[i],e=a.hostname;e!==n&&a.setAttribute("target","_blank")}});var u=!1;function v(t,n){let i;return function(...a){let e=this;clearTimeout(i),i=setTimeout(()=>t.apply(e,a),n)}}function C(){let t,n;ScrollTrigger.defaults({markers:!0,anticipatePin:1,ease:"none"});function i(){t&&(t.kill(!0),t=null),n&&(n.kill(!0),n=null),gsap.set("[data-gsap-clearProps]",{clearProps:"all"}),gsap.set("[data-sticky-visual]",{clearProps:"all"}),gsap.set(".pin-spacer",{clearProps:"all"})}function a(){i();let e=$('[data-sticky-visual="animated"]').children(),l=0,o=0,c;function d(){return l=0,e.each(function(r){let s=$(this).height();l+=s,r===e.length-1&&(c=l-s)}),c}function g(r){let s=$(r),f=s.length;s.each(function(m){$(this).css("z-index",f-m)})}gsap.set(e,{position:"absolute"}),g(e),t=gsap.timeline({scrollTrigger:{trigger:'[data-sticky-visual="animated"]',start:()=>`top ${$(".nav_wrap").outerHeight()}`,end:()=>`+=${d()}`,pin:!0,scrub:!0,invalidateOnRefresh:!0}}),e.each(function(r){r!==e.length-1&&t.to($(this),{ease:"none",clipPath:"inset(0px 0px 100%)"})})}ScrollTrigger.matchMedia({"(min-width: 992px)":a})}function S(){let t=$(".nav"),n=0,i=v(()=>{let a=window.scrollY;a>n&&a>50&&!u?gsap.to(t,{y:"-200%",duration:1,ease:"power2.out"}):a<n&&gsap.to(t,{y:"0%",duration:1,ease:"power2.out"}),n=a},10);window.addEventListener("scroll",i)}function k(){function t(){u?(u=!1,lenis.start()):(u=!0,lenis.stop())}$('[scroll="toggle"]').on("click",t);let n=[991,767,479],i=window.innerWidth;function a(){let e=window.innerWidth;n.forEach(l=>{u&&(i<=l&&e>l||i>=l&&e<l)&&lenis.start()}),i=e}window.addEventListener("resize",a)}function y(){let t=$(".card"),n=Math.floor(t.length/2),i=t.eq(n),a=-6;t.each(function(l){let o=$(this),c=Math.abs(l-n)*1,d=t.length-Math.abs(l-n);l<n?o.addClass("before-middle"):l>n?o.addClass("after-middle"):o.addClass("middle-item"),o.css({"--distance":"0em","margin-left":`${a}em`,"margin-right":`${a}em`,"--depth":`${c}em`,"z-index":d})}),i.addClass("middle"),$(".middle").each(function(){let l=$(this);l.prevAll(".card").slice(0,3).each(function(o){$(this).addClass(o===0?"first":o===1?"second":"third")}),l.nextAll(".card").slice(0,3).each(function(o){$(this).addClass(o===0?"first":o===1?"second":"third")})});let e=gsap.timeline({scrollTrigger:{trigger:$(".card-wrap"),start:"top bottom",end:"bottom center",scrub:!0}});e.fromTo($(".card-row"),{"--rowX":"120em","--rotationX":"-30deg","--angle":"80deg"},{"--rowX":"0em","--rotationX":"-0deg","--angle":"90deg",ease:"none"}),e.to(i,{"--zDepth":"12em",ease:"none"}),e.to(t.filter(".before-middle"),{"--zDepth":"-12em",ease:"none"},"<"),e.to(t.filter(".after-middle"),{"--zDepth":"12em",ease:"none"},"<"),e.fromTo(i,{"--depth":"-7em","--angle":"90deg"},{"--angle":"0deg",ease:"none"},"<")}function x(){gsap.timeline({scrollTrigger:{trigger:$(".timeline-box"),start:"top bottom",end:"top center",scrub:!0}}).to($("[data-timeline-mask]"),{height:"70%",yPercent:-30,ease:"none"},"<")}$(".section.cc-hp-timeline").each(function(t){let n=$(this),i=n.find("[flip-origin]"),a=n.find("[flip-target]"),e=n.find("[data-label-el]"),l=t,o,c;i.each(function(g){let r=`${l}-${g}`;$(this).attr("data-flip-id",r),a.eq(g).attr("data-flip-id",r)});function d(){o&&(o.kill(),gsap.set(a,{clearProps:"all"}),gsap.set(e,{clearProps:"all"}));let g=Flip.getState(i);o=gsap.timeline({scrollTrigger:{trigger:$(".card-wrap"),start:"top 80%",end:"top center",scrub:!0}}),o.add(Flip.from(g,{targets:a,ignore:"height",ease:"none"}));let r=$("[data-label-end]"),s=e[0].getBoundingClientRect(),f=r[0].getBoundingClientRect(),m=f.left+f.width/2-(s.left+s.width/2);o.to(e,{x:`+=${m}`,ease:"none",onUpdate:function(){let p=this.progress(),h=0+(180-0)*p,w=Math.floor(h/60),T=Math.floor(h%60),b=`${w}:${T.toString().padStart(2,"0")}`;e.find("div").text("+"+b+"h")}},"<0.2"),o.to(e,{backgroundColor:"red",color:"white",duration:0})}d(),window.addEventListener("resize",function(){clearTimeout(c),c=setTimeout(function(){d()},250)})});C();S();k();y();x();})();
