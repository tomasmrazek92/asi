"use strict";(()=>{gsap.registerPlugin(ScrollTrigger,Flip);$(document).ready(()=>{for(var e=document.getElementsByTagName("a"),i=window.location.hostname,t=0;t<e.length;t++){var l=e[t],n=l.hostname;n!==i&&l.setAttribute("target","_blank")}});var g=!1;function f(){return $(window).width()>991}function x(e,i){let t;return function(...l){let n=this;clearTimeout(t),t=setTimeout(()=>e.apply(n,l),i)}}function E(){let e,i;ScrollTrigger.defaults({markers:!0,anticipatePin:1,ease:"none"});function t(){e&&(e.kill(!0),e=null),i&&(i.kill(!0),i=null),gsap.set("[data-gsap-clearProps]",{clearProps:"all"}),gsap.set("[data-sticky-visual]",{clearProps:"all"}),gsap.set(".pin-spacer",{clearProps:"all"})}function l(){t();let n=$('[data-sticky-visual="animated"]').children(),a=0,r=0,o;function d(){return a=0,n.each(function(s){let c=$(this).height();a+=c,s===n.length-1&&(o=a-c)}),o}function m(s){let c=$(s),u=c.length;c.each(function(h){$(this).css("z-index",u-h)})}gsap.set(n,{position:"absolute"}),m(n),e=gsap.timeline({scrollTrigger:{trigger:'[data-sticky-visual="animated"]',start:"center center",end:()=>`+=${d()}`,pin:!0,scrub:!0,invalidateOnRefresh:!0}}),n.each(function(s){s!==n.length-1&&e.to($(this),{ease:"none",clipPath:"inset(0px 0px 100%)"})})}ScrollTrigger.matchMedia({"(min-width: 992px)":l})}function P(){let e=$(".nav"),i=0,t=x(()=>{let l=window.scrollY;l>i&&l>50&&!g?gsap.to(e,{y:"-200%",duration:1,ease:"power2.out"}):l<i&&gsap.to(e,{y:"0%",duration:1,ease:"power2.out"}),i=l},1);window.addEventListener("scroll",t)}function y(){function e(){g?(g=!1,lenis.start()):(g=!0,lenis.stop())}$('[scroll="toggle"]').on("click",e);let i=[991,767,479],t=window.innerWidth;function l(){let n=window.innerWidth;i.forEach(a=>{g&&(t<=a&&n>a||t>=a&&n<a)&&lenis.start()}),t=n}window.addEventListener("resize",l)}function z(){let e=$(".card"),i=Math.floor(e.length/2),t=e.eq(i),l=-6;e.each(function(a){let r=$(this),o=Math.abs(a-i)*1,d=e.length-Math.abs(a-i);a<i?r.addClass("before-middle"):a>i?r.addClass("after-middle"):r.addClass("middle-item"),r.css({"--distance":"0em","margin-left":`${l}em`,"margin-right":`${l}em`,"--depth":`${o}em`,"z-index":d})}),t.addClass("middle"),$(".middle").each(function(){let a=$(this);a.prevAll(".card").slice(0,3).each(function(r){$(this).addClass(r===0?"first":r===1?"second":"third")}),a.nextAll(".card").slice(0,3).each(function(r){$(this).addClass(r===0?"first":r===1?"second":"third")})});let n=gsap.timeline({scrollTrigger:{trigger:$(".card-wrap"),start:"top bottom",end:"bottom center",scrub:1}});n.fromTo($(".card-row"),{"--rowX":"80em","--rotationX":"-30deg","--angle":"80deg"},{"--rowX":"0em","--rotationX":"-0deg","--angle":"90deg",ease:"none"}),n.to(e.filter(".before-middle"),{"--zDepth":()=>f()?"-12em":"-6em",ease:"none"}),n.to(e.filter(".after-middle"),{"--zDepth":()=>f()?"12em":"6em",ease:"none"},"<"),n.fromTo(t,{"--depth":"-7em","--angle":"90deg"},{"--angle":"0deg",ease:"none"},"<"),n.to(t,{"--zDepth":"5em",ease:"none"}),n.to(e.not(t),{"--depth":"5em",ease:"none"},"<")}function D(){$(".section.cc-hp-timeline").each(function(e){let i=$(this),t=i.find(".timeline-wrap"),l=i.find("[flip-origin]"),n=i.find("[flip-target]"),a=i.find("[data-label-el]"),r=e,o,d;l.each(function(s){let c=`${r}-${s}`;$(this).attr("data-flip-id",c),n.eq(s).attr("data-flip-id",c)});function m(){let s=f();o&&(o.kill(),gsap.set(t,{clearProps:"all"}),gsap.set(n,{clearProps:"all"}),gsap.set(a,{clearProps:"all"}));let c=Flip.getState(l);o=gsap.timeline({scrollTrigger:{trigger:$(".timeline-box"),start:"top bottom",endTrigger:$(".card-wrap"),end:"center center",scrub:1}}),o.add(Flip.from(c,{targets:n,ignore:"height",ease:"none"}));function u(){let b=this.progress(),v=0+(180-0)*b,k=Math.floor(v/60),C=Math.floor(v%60),S=`${k}:${C.toString().padStart(2,"0")}`;b===0?a.find("div").text("Now"):a.find("div").text("+"+S+"h")}let h=$("[data-label-end]"),p=a.filter(":visible")[0].getBoundingClientRect(),w=h[0].getBoundingClientRect(),T=w.left+w.width/2-(p.left+p.width/2);o.to(s?a:t,{x:s?`+=${T}`:`-=${T}`,ease:"none",onUpdate:u},"<"),o.to(a,{backgroundColor:"red",color:"white",duration:0})}m(),window.addEventListener("resize",function(){clearTimeout(d),d=setTimeout(function(){m()},250)})})}function I(){let e=$("[data-timeline-mask]"),i=$("[data-timeline-heading]"),t,l;function n(){let a=f();t&&(t.kill(),gsap.set(e,{clearProps:"all"}),gsap.set(i,{clearProps:"all"})),t=gsap.timeline({scrollTrigger:{trigger:$(".visual-box.cc-new-gen"),start:"bottom bottom",endTrigger:$(".card-wrap"),end:"center center",scrub:1}}),a&&(t.to([e,i],{y:"-80rem",ease:"none"},"<"),t.to(e,{height:"70%"},"<"))}n(),window.addEventListener("resize",function(){clearTimeout(l),l=setTimeout(function(){n()},250)})}E();P();y();z();I();D();})();
