"use strict";(()=>{gsap.registerPlugin(ScrollTrigger,Flip);var a=!1;function L(i,s){let n;return function(...o){let r=this;clearTimeout(n),n=setTimeout(()=>i.apply(r,o),s)}}function T(){for(var i=document.getElementsByTagName("a"),s=window.location.hostname,n=0;n<i.length;n++){var o=i[n],r=o.hostname;r!==s&&o.setAttribute("target","_blank")}}function k(){let i=$(".nav"),s=0,n=L(()=>{let o=window.scrollY;o>s&&o>50&&!a?gsap.to(i,{y:"-200%",duration:1,ease:"power2.out"}):o<s&&gsap.to(i,{y:"0%",duration:1,ease:"power2.out"}),s=o},1);window.addEventListener("scroll",n)}function x(){function i(){a?(a=!1,lenis.start()):(a=!0,lenis.stop())}$('[scroll="toggle"]').on("click",i);let s=[991,767,479],n=window.innerWidth;function o(){let r=window.innerWidth;s.forEach(t=>{a&&(n<=t&&r>t||n>=t&&r<t)&&lenis.start()}),n=r}window.addEventListener("resize",o)}function S(){let i,s;ScrollTrigger.defaults({markers:!0,anticipatePin:1,ease:"none"});function n(){i&&(i.kill(!0),i=null),s&&(s.kill(!0),s=null),gsap.set("[data-gsap-clearProps]",{clearProps:"all"}),gsap.set("[data-sticky-visual]",{clearProps:"all"}),gsap.set(".pin-spacer",{clearProps:"all"})}function o(){n();let t=$('[data-sticky-visual="animated"]').children();if(!t.length)return;function p(e){let l=$(e),c=l.length;l.each(function(u){$(this).css("z-index",c-u)})}function d(){let c=($(window).height()-t.eq(0).height())/2;$(".sticky-header").css("margin-bottom",`-${c}px`),ScrollTrigger.refresh()}function h(e,l){let c;return function(...y){let v=()=>{clearTimeout(c),e(...y)};clearTimeout(c),c=setTimeout(v,l)}}let m=h(d,250);$(window).on("resize.dynamicGap",m),gsap.set(t,{position:"absolute"}),p(t);let w=gsap.timeline({scrollTrigger:{trigger:".sticky-section_list",start:()=>`${document.querySelector(".sticky-section_list li:first-child").getBoundingClientRect().height/2}px center`,end:()=>{let l=document.querySelector(".sticky-section_list li:last-child").getBoundingClientRect();return`${$(".sticky-section_list").height()-l.height/2}px center`},pin:'[data-sticky-visual="animated"]',scrub:!0,invalidateOnRefresh:!0,onLeave:()=>{let e=t.eq(t.length-1).find("video")[0];g(e)}}});d(),t.each(function(e){let l=e<t.length-1?t.eq(e+1).find("video")[0]:null,c=!1;e!==t.length-1&&w.to($(this),{ease:"none",clipPath:"inset(0px 0px 100%)",onUpdate:function(){this.progress()>=.5&&!c&&(c=!0,g(l))}})});let f=e=>e!==void 0?e.catch(l=>console.warn("Video operation error:",l)):Promise.resolve(),P=()=>{let e=[];return t.find("video").each(function(){e.push(f(this.pause()))}),Promise.all(e)},g=e=>e?f(e.play()):Promise.resolve();return function(){$(window).off("resize.dynamicGap")}}let r;ScrollTrigger.matchMedia({"(min-width: 992px)":function(){r=o()},"(max-width: 991px)":function(){r&&(r(),r=null)}})}$(document).ready(function(){k(),x(),T(),S()});})();
