"use strict";(()=>{gsap.registerPlugin(ScrollTrigger,Flip);$(document).ready(()=>{for(var e=document.getElementsByTagName("a"),i=window.location.hostname,a=0;a<e.length;a++){var n=e[a],t=n.hostname;t!==i&&n.setAttribute("target","_blank")}});var u=!1;function v(e,i){let a;return function(...n){let t=this;clearTimeout(a),a=setTimeout(()=>e.apply(t,n),i)}}function S(){let e,i;ScrollTrigger.defaults({markers:!0,anticipatePin:1,ease:"none"});function a(){e&&(e.kill(!0),e=null),i&&(i.kill(!0),i=null),gsap.set("[data-gsap-clearProps]",{clearProps:"all"}),gsap.set("[data-sticky-visual]",{clearProps:"all"}),gsap.set(".pin-spacer",{clearProps:"all"})}function n(){a();let t=$('[data-sticky-visual="animated"] img'),o=0,r=0,c;function d(){return o=0,t.each(function(l){let s=$(this).height();o+=s,l===t.length-1&&(c=o-s)}),c}function g(l){let s=$(l),m=s.length;s.each(function(f){$(this).css("z-index",m-f)})}gsap.set(t,{position:"absolute"}),g(t),e=gsap.timeline({scrollTrigger:{trigger:'[data-sticky-visual="animated"]',start:()=>`top ${$(".nav_wrap").outerHeight()}`,end:()=>`+=${d()}`,pin:!0,scrub:!0,invalidateOnRefresh:!0}}),t.each(function(l){l!==t.length-1&&e.to($(this),{ease:"none",clipPath:"inset(0px 0px 100%)"})})}ScrollTrigger.matchMedia({"(min-width: 992px)":n})}function x(){let e=$(".nav"),i=0,a=v(()=>{let n=window.scrollY;n>i&&n>50&&!u?gsap.to(e,{y:"-200%",duration:1,ease:"power2.out"}):n<i&&gsap.to(e,{y:"0%",duration:1,ease:"power2.out"}),i=n},10);window.addEventListener("scroll",a)}function k(){function e(){u?(u=!1,lenis.start()):(u=!0,lenis.stop())}$('[scroll="toggle"]').on("click",e);let i=[991,767,479],a=window.innerWidth;function n(){let t=window.innerWidth;i.forEach(o=>{u&&(a<=o&&t>o||a>=o&&t<o)&&lenis.start()}),a=t}window.addEventListener("resize",n)}function C(){let e=$(".card"),i=Math.floor(e.length/2),a=e.eq(i),n=-6;e.each(function(o){let r=$(this),c=Math.abs(o-i)*1,d=e.length-Math.abs(o-i);r.css({"--distance":"0em","margin-left":`${n}em`,"margin-right":`${n}em`,"--depth":`${c}em`,"z-index":d})}),a.addClass("middle"),$(".middle").each(function(){let o=$(this);o.prevAll(".card").slice(0,3).each(function(r){$(this).addClass(r===0?"first":r===1?"second":"third")}),o.nextAll(".card").slice(0,3).each(function(r){$(this).addClass(r===0?"first":r===1?"second":"third")})});let t=gsap.timeline({scrollTrigger:{trigger:$(".card-wrap"),start:"top bottom",end:"bottom center",scrub:!0}});t.fromTo($(".card-row"),{"--rowX":"120em","--rotationX":"-30deg","--angle":"80deg"},{"--rowX":"0em","--rotationX":"-0deg","--angle":"90deg",ease:"none"}),t.to(a,{"--zDepth":"8em",ease:"none"}),t.fromTo(a,{"--depth":"-7em","--angle":"90deg",marginLeft:`${n}em`,marginRight:`${n}em`},{"--angle":"0deg",marginLeft:"3em",marginRight:"3em",ease:"none"},"<")}function y(){gsap.timeline({scrollTrigger:{trigger:$(".timeline-box"),start:"top bottom",end:"top center",scrub:!0}}).to($("[data-timeline-mask]"),{height:"40%",ease:"none"},"<")}$(".section.cc-hp-timeline").each(function(e){let i=$(this),a=i.find("[flip-origin]"),n=i.find("[flip-target]"),t=i.find("[data-label-el]"),o=e,r,c;a.each(function(g){let l=`${o}-${g}`;$(this).attr("data-flip-id",l),n.eq(g).attr("data-flip-id",l)});function d(){r&&(r.kill(),gsap.set(n,{clearProps:"all"}),gsap.set(t,{clearProps:"all"}));let g=Flip.getState(a);r=gsap.timeline({scrollTrigger:{trigger:$(".card-wrap"),start:"top 80%",end:"top center",scrub:!0}}),r.add(Flip.from(g,{targets:n,ignore:"height",ease:"none"}));let l=$("[data-label-end]"),s=t[0].getBoundingClientRect(),m=l[0].getBoundingClientRect(),f=m.left+m.width/2-(s.left+s.width/2);r.to(t,{x:`+=${f}`,ease:"none",onUpdate:function(){let p=this.progress(),h=900+(1140-900)*p,w=Math.floor(h/60),T=Math.floor(h%60),b=`${w}:${T.toString().padStart(2,"0")}`;t.find("div").text(b)}},"<0.2"),r.to(t,{backgroundColor:"red",color:"white"},">-0.15")}d(),window.addEventListener("resize",function(){clearTimeout(c),c=setTimeout(function(){d()},250)})});S();x();k();C();y();})();
