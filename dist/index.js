"use strict";(()=>{gsap.registerPlugin(ScrollTrigger,Flip);var c=!1;function k(e,o){let r;return function(...i){let n=this;clearTimeout(r),r=setTimeout(()=>e.apply(n,i),o)}}function L(){for(var e=document.getElementsByTagName("a"),o=window.location.hostname,r=0;r<e.length;r++){var i=e[r],n=i.hostname;n!==o&&i.setAttribute("target","_blank")}}function T(){let e=$(".nav"),o=0,r=k(()=>{let i=window.scrollY,n=e.find(".w--open").length>=1;i>o&&i>50&&!c&&!n?gsap.to(e,{y:"-200%",duration:1,ease:"power2.out"}):i<o&&gsap.to(e,{y:"0%",duration:1,ease:"power2.out"}),o=i},1);window.addEventListener("scroll",r)}function b(){function e(){c?(c=!1,lenis.start()):(c=!0,lenis.stop())}$('[scroll="toggle"]').on("click",e);let o=[991,767,479],r=window.innerWidth;function i(){let n=window.innerWidth;o.forEach(s=>{c&&(r<=s&&n>s||r>=s&&n<s)&&lenis.start()}),r=n}window.addEventListener("resize",i)}function S(){let e;if(Webflow.env("editor")===void 0){let n=function(u){e.raf(u),requestAnimationFrame(n)};var i=n;e=new Lenis({lerp:.075,wheelMultiplier:.7,gestureOrientation:"vertical",normalizeWheel:!1,smoothTouch:!1}),requestAnimationFrame(n)}$("[data-lenis-start]").on("click",function(){e.start()}),$("[data-lenis-stop]").on("click",function(){e.stop()}),$("[data-lenis-toggle]").on("click",function(){$(this).toggleClass("stop-scroll"),$(this).hasClass("stop-scroll")?e.stop():e.start()});let{body:o}=document;new ResizeObserver(()=>{console.log("resize"),e.resize()}).observe(o);function i(n){e.raf(n),requestAnimationFrame(i)}requestAnimationFrame(i)}function x(){let e,o;ScrollTrigger.defaults({markers:!0,anticipatePin:1,ease:"none"});function r(){e&&(e.kill(!0),e=null),o&&(o.kill(!0),o=null),gsap.set("[data-gsap-clearProps]",{clearProps:"all"}),gsap.set("[data-sticky-visual]",{clearProps:"all"}),gsap.set(".pin-spacer",{clearProps:"all"})}function i(){r();let s=$('[data-sticky-visual="animated"]').children();if(!s.length)return;function u(t){let l=$(t),a=l.length;l.each(function(d){$(this).css("z-index",a-d)})}function f(){let a=($(window).height()-s.eq(0).height())/2;$(".sticky-header").css("margin-bottom",`-${a}px`),ScrollTrigger.refresh()}function h(t,l){let a;return function(...v){let y=()=>{clearTimeout(a),t(...v)};clearTimeout(a),a=setTimeout(y,l)}}let m=h(f,250);$(window).on("resize.dynamicGap",m),gsap.set(s,{position:"absolute"}),u(s);let w=gsap.timeline({scrollTrigger:{trigger:".sticky-section_list",start:()=>`${document.querySelector(".sticky-section_list li:first-child").getBoundingClientRect().height/2}px center`,end:()=>{let l=document.querySelector(".sticky-section_list li:last-child").getBoundingClientRect();return`${$(".sticky-section_list").height()-l.height/2}px center`},pin:'[data-sticky-visual="animated"]',scrub:!0,invalidateOnRefresh:!0,onLeave:()=>{let t=s.eq(s.length-1).find("video")[0];p(t)}}});f(),s.each(function(t){let l=t<s.length-1?s.eq(t+1).find("video")[0]:null,a=!1;t!==s.length-1&&w.to($(this),{ease:"none",clipPath:"inset(0px 0px 100%)",onUpdate:function(){this.progress()>=.5&&!a&&(a=!0,p(l))}})});let g=t=>t!==void 0?t.catch(l=>console.warn("Video operation error:",l)):Promise.resolve(),P=()=>{let t=[];return s.find("video").each(function(){t.push(g(this.pause()))}),Promise.all(t)},p=t=>t?g(t.play()):Promise.resolve();return function(){$(window).off("resize.dynamicGap")}}let n;ScrollTrigger.matchMedia({"(min-width: 992px)":function(){n=i()},"(max-width: 991px)":function(){n&&(n(),n=null)}})}$(document).ready(function(){T(),b(),S(),L(),x()});})();
